1. What is the minimum viable recipe parsing requirement for MVP (e.g., must extract ingredient lines + quantities reliably, or is free-text acceptable if AI can interpret it)?
   Recommendation: Require structured extraction into “Ingredients” line-items (quantity + unit + item) before tailoring; if parsing fails, fall back to guided user correction rather than sending ambiguous text to the model.

2. What ingredient quantity formats must be supported (fractions, ranges like “2–3”, “to taste”, brand names), and how should they be stored for scaling?
   Recommendation: Store ingredients as (raw_text, parsed_quantity, parsed_unit, parsed_item, confidence) so scaling can be deterministic while still preserving the original line for display.

3. What is the calorie estimation method and output contract—should the AI return (a) total calories and per-serving calories, and (b) a breakdown by ingredient?
   Recommendation: MVP: require total + per-serving only, plus a confidence indicator (low/med/high) to manage user expectations; defer full breakdown unless needed for debugging.

4. Do you want the “brief note” from unmet targets to appear in the recipe itself (top as a one-liner) or as metadata outside the recipe view?
   Recommendation: Put it as a single line under “Estimated calories/serving” to keep the output clean and consistent with your no-comparison requirement.

5. How should “Keep it similar” be defined—same key ingredients, same cuisine, same cooking method, or minimal substitutions only?
   Recommendation: Define it as “preserve primary proteins + core flavor base + cooking method” and enforce by limiting substitutions to non-core items first (oils, dairy, sweeteners).

6. Which substitution categories are in-scope for the first version of the strategy (you listed dairy/oils/sugars/sauces)—should we include cooking method tweaks (bake instead of fry) and portioning changes (more veg, less starch)?
   Recommendation: Start with ingredient-level swaps + portion rebalancing (reduce high-calorie components, increase low-calorie volume like vegetables) and add cooking-method changes only after validation.

7. What should happen if a user sets both “Reduce calories” and “Scale portions”—are they mutually exclusive modes, or can users apply both sequentially?
   Recommendation: Keep them sequential but explicit: apply Scale first, then optionally Reduce calories; make this a “Run step 1 / step 2” flow to avoid confusion.

8. What is the desired recipe persistence model—do we store both original and tailored recipes as separate records, and do we tag tailored recipes with the mode/parameters used?
   Recommendation: Always store tailored recipes as new records with metadata (mode, target, aggressiveness, timestamp, model version) to support analytics and future improvements.

9. What is the minimum analytics dashboard/reporting need for MVP (e.g., just event collection, or a simple admin view showing funnel and weekly active generation)?
   Recommendation: Start with event collection + a basic internal dashboard for: profile completion rate, tailor success rate, P95 latency, weekly tailors/user, and save rate—these directly map to success criteria.

10. What are the initial technical constraints for AI integration: model choice, prompt strategy (single-shot vs multi-step: parse → plan → rewrite), and how will you control cost/latency under the 8s budget?
    Recommendation: Use a multi-step pipeline with caching: (1) format/parse, (2) compute scaling deterministically, (3) AI rewrite + calorie estimate; cache parsed recipes and reuse them across multiple tailoring runs to cut cost and time.

------------------------------------ Answers -----------------------------------------

1. Require structured extraction into “Ingredients” line-items (quantity + unit + item) before tailoring; if parsing fails, fall back to guided user correction rather than sending ambiguous text to the model.
2. Store ingredients as (raw_text, parsed_quantity, parsed_unit, parsed_item, confidence) so scaling can be deterministic while still preserving the original line for display.
3. MVP: require total + per-serving only, plus a confidence indicator (low/med/high) to manage user expectations; defer full breakdown unless needed for debugging.
4. Not in MVP
5. Define it as “preserve primary proteins + core flavor base + cooking method” and enforce by limiting substitutions to non-core items first (oils, dairy, sweeteners).
6. Start with ingredient-level swaps + portion rebalancing (reduce high-calorie components, increase low-calorie volume like vegetables) and add cooking-method changes only after validation.
7. Keep them sequential but explicit: apply Scale first, then optionally Reduce calories; make this a “Run step 1 / step 2” flow to avoid confusion.
8. Always store tailored recipes as new records with metadata (mode, target, aggressiveness, timestamp, model version) to support analytics and future improvements.
9. No dashboard needed for MVP.
10. Use a multi-step pipeline with caching: (1) format/parse, (2) compute scaling deterministically, (3) AI rewrite + calorie estimate; cache parsed recipes and reuse them across multiple tailoring runs to cut cost and time.

---

You are an AI assistant whose task is to summarize a conversation about PRD (Product Requirements Document) planning for MVP and prepare a concise summary for the next development stage. In the conversation history you will find the following information:
1. Project description
2. Identified user problem
3. Conversation history containing questions and answers
4. Recommendations regarding PRD content

Your task is to:
1. Summarize the conversation history, focusing on all decisions related to PRD planning.
2. Match the model's recommendations to the answers given in the conversation history. Identify which recommendations are relevant based on the discussion.
3. Prepare a detailed conversation summary that includes:
   a. Main functional requirements of the product
   b. Key user stories and usage paths
   c. Important success criteria and ways to measure them
   d. Any unresolved issues or areas requiring further clarification
4. Format the results as follows:

<conversation_summary>
<decisions>
[List decisions made by the user, numbered].
</decisions>

<matched_recommendations>
[List of the most relevant recommendations matched to the conversation, numbered]
</matched_recommendations>

<prd_planning_summary>
[Provide a detailed summary of the conversation, including the elements listed in step 3].
</prd_planning_summary>

<unresolved_issues>
[List any unresolved issues or areas requiring further clarification, if any exist]
</unresolved_issues>
</conversation_summary>

The final result should contain only content in markdown format. Ensure that your summary is clear, concise, and provides valuable information for the next stage of creating the PRD.
